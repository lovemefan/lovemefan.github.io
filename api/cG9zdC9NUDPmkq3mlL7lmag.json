{"title":"Android学习笔记 (三)   MP3播放器","date":"2017-11-12T05:58:00.000Z","excerpt":"<p><strong> Android学习笔记 (三)   MP3播放器：</strong> <excerpt in=\"\" index=\"\" |=\"\" 首页摘要=\"\"><br> 利用Intent 唤醒其他Activity或其他APP<br>","slug":"MP3播放器","tags":["Android","APP开发","学习笔记"],"updated":"2017-11-16T04:59:46.000Z","content":"<p><strong> Android学习笔记 (三)   MP3播放器：</strong> <excerpt in=\"\" index=\"\" |=\"\" 首页摘要=\"\"><br> 利用Intent 唤醒其他Activity或其他APP<br><a id=\"more\"></a></excerpt></p>\n<p><the rest=\"\" of=\"\" contents=\"\" |=\"\" 余下全文=\"\"></the></p>\n<h1 id=\"MP3播放器\"><a href=\"#MP3播放器\" class=\"headerlink\" title=\"MP3播放器\"></a>MP3播放器</h1><p>整个音乐播放器设计模仿网易云音乐风格<br>工程源代码已上传至Github: <a href=\"https://github.com/lovemefan/MP3Player\" target=\"_blank\" rel=\"external\">源码下载</a></p>\n<p><strong>实现的功能</strong>:</p>\n<ul>\n<li><strong>1.</strong>暂停,开始音乐,后台播放</li>\n<li><strong>2.</strong>进度条可拖动,能实现音乐跳转</li>\n<li><strong>3.</strong>能够循环切换上一曲和下一曲</li>\n<li><strong>4.</strong>播放完毕后自动下一曲</li>\n<li><strong>5.</strong>歌曲封面有旋转的动画</li>\n<li><strong>6.</strong>背景图片毛玻璃美化</li>\n</ul>\n<p><strong>待实现的功能</strong></p>\n<ul>\n<li>音乐列表</li>\n<li>本地音乐读取播放</li>\n<li>网络音乐播放</li>\n</ul>\n<h2 id=\"Music-java设计\"><a href=\"#Music-java设计\" class=\"headerlink\" title=\"Music.java设计\"></a>Music.java设计</h2><p>要播放多首音乐,首先设计一个音乐类用于存放歌曲信息,如歌曲名,封面图片的ID,音乐文件的ID<br><code>Music.java</code><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">package</span> com.lovemefan.mp3player;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> android.os.Bundle;</div><div class=\"line\"><span class=\"keyword\">import</span> android.os.Parcel;</div><div class=\"line\"><span class=\"keyword\">import</span> android.os.Parcelable;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">/**</span></div><div class=\"line\"> * Created by Lovemefan on 2017/11/7.</div><div class=\"line\"> */</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Music</span> <span class=\"keyword\">implements</span> <span class=\"title\">Parcelable</span></span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> String name;<span class=\"comment\">//歌曲名</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> coverId;<span class=\"comment\">//封面的ID</span></div><div class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> resourceId;<span class=\"comment\">//资源路径ID</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Music</span><span class=\"params\">(String name, <span class=\"keyword\">int</span> coverId, <span class=\"keyword\">int</span> resourceId)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.name = name;</div><div class=\"line\">        <span class=\"keyword\">this</span>.coverId = coverId;</div><div class=\"line\">        <span class=\"keyword\">this</span>.resourceId = resourceId;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">getName</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> name;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setName</span><span class=\"params\">(String name)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.name = name;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getCoverId</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> coverId;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setCoverId</span><span class=\"params\">(<span class=\"keyword\">int</span> coverId)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.coverId = coverId;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getResourceId</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> resourceId;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setResourceId</span><span class=\"params\">(<span class=\"keyword\">int</span> resourceId)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">this</span>.resourceId = resourceId;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">describeContents</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">//    实现接口Parcelable需要重写下面两个方法</span></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">writeToParcel</span><span class=\"params\">(Parcel parcel, <span class=\"keyword\">int</span> i)</span> </span>&#123;</div><div class=\"line\">        parcel.writeString(getName());</div><div class=\"line\">        Bundle bundle = <span class=\"keyword\">new</span> Bundle();</div><div class=\"line\">        bundle.putInt(<span class=\"string\">\"coverId\"</span>,getCoverId());</div><div class=\"line\">        bundle.putInt(<span class=\"string\">\"resourceId\"</span>,getResourceId());</div><div class=\"line\">        parcel.writeBundle(bundle);</div><div class=\"line\">    &#125;<span class=\"comment\">//将成员变量一一写入Parcel中</span></div><div class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Creator&lt;Music&gt; CREATOR = <span class=\"keyword\">new</span> Creator&lt;Music&gt;() &#123;</div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> Music <span class=\"title\">createFromParcel</span><span class=\"params\">(Parcel parcel)</span> </span>&#123;</div><div class=\"line\">            Bundle bundle = parcel.readBundle();</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Music(parcel.readString(), bundle.getInt(<span class=\"string\">\"coverId\"</span>), bundle.getInt(<span class=\"string\">\"resourceId\"</span>));</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"keyword\">public</span> Music[] newArray(<span class=\"keyword\">int</span> i) &#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Music[i];</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"后台服务类\"><a href=\"#后台服务类\" class=\"headerlink\" title=\"后台服务类\"></a>后台服务类</h2><p>为了让音乐能够在app后台运行,就要设计一个Service.<br><code>MusicPlayService.java</code><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">package</span> com.lovemefan.mp3player;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> android.app.Service;</div><div class=\"line\"><span class=\"keyword\">import</span> android.content.Intent;</div><div class=\"line\"><span class=\"keyword\">import</span> android.media.MediaPlayer;</div><div class=\"line\"><span class=\"keyword\">import</span> android.os.Binder;</div><div class=\"line\"><span class=\"keyword\">import</span> android.os.IBinder;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MusicPlayService</span> <span class=\"keyword\">extends</span> <span class=\"title\">Service</span> </span>&#123;</div><div class=\"line\">    <span class=\"keyword\">private</span> MediaPlayer mediaPlayer = <span class=\"keyword\">null</span>;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MusicPlayService</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyBinder</span> <span class=\"keyword\">extends</span> <span class=\"title\">Binder</span></span>&#123;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> MediaPlayer <span class=\"title\">getMediaPlayer</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">            <span class=\"keyword\">return</span> mediaPlayer;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> IBinder <span class=\"title\">onBind</span><span class=\"params\">(Intent intent)</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">// <span class=\"doctag\">TODO:</span> Return the communication channel to the service.</span></div><div class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> MyBinder();</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        mediaPlayer = MediaPlayer.create(<span class=\"keyword\">this</span>,R.raw.aimer_ninelie);<span class=\"comment\">//设置初始值</span></div><div class=\"line\"><span class=\"comment\">//        mediaPlayer.start();</span></div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDestroy</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onDestroy();</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"MainActivity-java\"><a href=\"#MainActivity-java\" class=\"headerlink\" title=\"MainActivity.java\"></a>MainActivity.java</h2><p>由MainActivity绑定MusicPlayService服务,让音乐在服务中运行.另外还要创建一个线程来更新进度条和当前时间.<br><code>MainActivity.java</code><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div><div class=\"line\">138</div><div class=\"line\">139</div><div class=\"line\">140</div><div class=\"line\">141</div><div class=\"line\">142</div><div class=\"line\">143</div><div class=\"line\">144</div><div class=\"line\">145</div><div class=\"line\">146</div><div class=\"line\">147</div><div class=\"line\">148</div><div class=\"line\">149</div><div class=\"line\">150</div><div class=\"line\">151</div><div class=\"line\">152</div><div class=\"line\">153</div><div class=\"line\">154</div><div class=\"line\">155</div><div class=\"line\">156</div><div class=\"line\">157</div><div class=\"line\">158</div><div class=\"line\">159</div><div class=\"line\">160</div><div class=\"line\">161</div><div class=\"line\">162</div><div class=\"line\">163</div><div class=\"line\">164</div><div class=\"line\">165</div><div class=\"line\">166</div><div class=\"line\">167</div><div class=\"line\">168</div><div class=\"line\">169</div><div class=\"line\">170</div><div class=\"line\">171</div><div class=\"line\">172</div><div class=\"line\">173</div><div class=\"line\">174</div><div class=\"line\">175</div><div class=\"line\">176</div><div class=\"line\">177</div><div class=\"line\">178</div><div class=\"line\">179</div><div class=\"line\">180</div><div class=\"line\">181</div><div class=\"line\">182</div><div class=\"line\">183</div><div class=\"line\">184</div><div class=\"line\">185</div><div class=\"line\">186</div><div class=\"line\">187</div><div class=\"line\">188</div><div class=\"line\">189</div><div class=\"line\">190</div><div class=\"line\">191</div><div class=\"line\">192</div><div class=\"line\">193</div><div class=\"line\">194</div><div class=\"line\">195</div><div class=\"line\">196</div><div class=\"line\">197</div><div class=\"line\">198</div><div class=\"line\">199</div><div class=\"line\">200</div><div class=\"line\">201</div><div class=\"line\">202</div><div class=\"line\">203</div><div class=\"line\">204</div><div class=\"line\">205</div><div class=\"line\">206</div><div class=\"line\">207</div><div class=\"line\">208</div><div class=\"line\">209</div><div class=\"line\">210</div><div class=\"line\">211</div><div class=\"line\">212</div><div class=\"line\">213</div><div class=\"line\">214</div><div class=\"line\">215</div><div class=\"line\">216</div><div class=\"line\">217</div><div class=\"line\">218</div><div class=\"line\">219</div><div class=\"line\">220</div><div class=\"line\">221</div><div class=\"line\">222</div><div class=\"line\">223</div><div class=\"line\">224</div><div class=\"line\">225</div><div class=\"line\">226</div><div class=\"line\">227</div><div class=\"line\">228</div><div class=\"line\">229</div><div class=\"line\">230</div><div class=\"line\">231</div><div class=\"line\">232</div><div class=\"line\">233</div><div class=\"line\">234</div><div class=\"line\">235</div><div class=\"line\">236</div><div class=\"line\">237</div><div class=\"line\">238</div><div class=\"line\">239</div><div class=\"line\">240</div><div class=\"line\">241</div><div class=\"line\">242</div><div class=\"line\">243</div><div class=\"line\">244</div><div class=\"line\">245</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">package</span> com.lovemefan.mp3player;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> android.content.ComponentName;</div><div class=\"line\"><span class=\"keyword\">import</span> android.content.Context;</div><div class=\"line\"><span class=\"keyword\">import</span> android.content.Intent;</div><div class=\"line\"><span class=\"keyword\">import</span> android.content.ServiceConnection;</div><div class=\"line\"><span class=\"keyword\">import</span> android.content.res.AssetFileDescriptor;</div><div class=\"line\"><span class=\"keyword\">import</span> android.content.res.Resources;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.Bitmap;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.BitmapFactory;</div><div class=\"line\"><span class=\"keyword\">import</span> android.graphics.drawable.BitmapDrawable;</div><div class=\"line\"><span class=\"keyword\">import</span> android.media.AudioAttributes;</div><div class=\"line\"><span class=\"keyword\">import</span> android.media.MediaPlayer;</div><div class=\"line\"><span class=\"keyword\">import</span> android.os.Build;</div><div class=\"line\"><span class=\"keyword\">import</span> android.os.Handler;</div><div class=\"line\"><span class=\"keyword\">import</span> android.os.IBinder;</div><div class=\"line\"><span class=\"keyword\">import</span> android.os.Message;</div><div class=\"line\"><span class=\"keyword\">import</span> android.support.annotation.RequiresApi;</div><div class=\"line\"><span class=\"keyword\">import</span> android.support.v7.app.AppCompatActivity;</div><div class=\"line\"><span class=\"keyword\">import</span> android.os.Bundle;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.View;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.Window;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.WindowManager;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.animation.Animation;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.animation.AnimationUtils;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.animation.LinearInterpolator;</div><div class=\"line\"><span class=\"keyword\">import</span> android.view.animation.RotateAnimation;</div><div class=\"line\"><span class=\"keyword\">import</span> android.widget.ImageView;</div><div class=\"line\"><span class=\"keyword\">import</span> android.widget.LinearLayout;</div><div class=\"line\"><span class=\"keyword\">import</span> android.widget.ProgressBar;</div><div class=\"line\"><span class=\"keyword\">import</span> android.widget.SeekBar;</div><div class=\"line\"><span class=\"keyword\">import</span> android.widget.TextView;</div><div class=\"line\"><span class=\"keyword\">import</span> android.widget.Toast;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">import</span> java.io.IOException;</div><div class=\"line\"><span class=\"keyword\">import</span> java.util.ArrayList;</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">AppCompatActivity</span> <span class=\"keyword\">implements</span> <span class=\"title\">ServiceConnection</span> </span>&#123;</div><div class=\"line\">    ArrayList&lt;Music&gt; musics = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</div><div class=\"line\">    MediaPlayer mediaPlayer;<span class=\"comment\">//媒体播放器</span></div><div class=\"line\">    ImageView playButton;<span class=\"comment\">//播放按钮</span></div><div class=\"line\">    SeekBar progressBar ;<span class=\"comment\">//进度条</span></div><div class=\"line\">    TextView title;<span class=\"comment\">//标题,用于显示歌名</span></div><div class=\"line\">    TextView currentTime;<span class=\"comment\">//显示当前播放的时间</span></div><div class=\"line\">    TextView duration;<span class=\"comment\">//显示歌曲时长</span></div><div class=\"line\">    Handler handler ;<span class=\"comment\">//用于其他线程更新</span></div><div class=\"line\">    CircleImageView cover;<span class=\"comment\">//显示歌曲的封面</span></div><div class=\"line\">    LinearLayout root;<span class=\"comment\">//根面板</span></div><div class=\"line\">    <span class=\"keyword\">int</span> musicProcess=<span class=\"number\">0</span>;<span class=\"comment\">//歌曲的进度;</span></div><div class=\"line\">    <span class=\"keyword\">int</span> musicCurIndex = <span class=\"number\">0</span>;<span class=\"comment\">//当前播放的歌曲的下标</span></div><div class=\"line\">    Animation rotateAnimation ;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">//用于handle的handleMessage处理不同的事件</span></div><div class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> UpdateCurrentTime=<span class=\"number\">0</span>;<span class=\"comment\">//刷新当前播放时间标识符</span></div><div class=\"line\">    <span class=\"meta\">@RequiresApi</span>(api = Build.VERSION_CODES.LOLLIPOP)</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</div><div class=\"line\">        supportRequestWindowFeature(Window.FEATURE_NO_TITLE);;<span class=\"comment\">//去掉标题栏</span></div><div class=\"line\">        <span class=\"keyword\">this</span>.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);<span class=\"comment\">//去掉信息栏</span></div><div class=\"line\">        setContentView(R.layout.activity_main);</div><div class=\"line\">        activityInit();<span class=\"comment\">//相关控件初始化</span></div><div class=\"line\">        bindService(<span class=\"keyword\">new</span> Intent(MainActivity.<span class=\"keyword\">this</span>,MusicPlayService.class), MainActivity.<span class=\"keyword\">this</span>, Context.BIND_AUTO_CREATE);<span class=\"comment\">//绑定服务</span></div><div class=\"line\"></div><div class=\"line\">        musics.add(<span class=\"keyword\">new</span> Music(<span class=\"string\">\"ninelie\"</span>,R.drawable.nineliecover,R.raw.aimer_ninelie));</div><div class=\"line\">        musics.add(<span class=\"keyword\">new</span> Music(<span class=\"string\">\"像风一样\"</span>,R.drawable.linkwinds,R.raw.like_winds));</div><div class=\"line\">        musics.add(<span class=\"keyword\">new</span> Music(<span class=\"string\">\"Let It Out\"</span>,R.drawable.let_it_out,R.raw.let_it_out));</div><div class=\"line\">        refreshMusicInfo(musics.get(<span class=\"number\">0</span>));</div><div class=\"line\">        <span class=\"comment\">//</span></div><div class=\"line\">        progressBar.setOnSeekBarChangeListener(<span class=\"keyword\">new</span> SeekBar.OnSeekBarChangeListener() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onProgressChanged</span><span class=\"params\">(SeekBar seekBar, <span class=\"keyword\">int</span> i, <span class=\"keyword\">boolean</span> b)</span> </span>&#123;</div><div class=\"line\">                musicProcess = i;</div><div class=\"line\">                <span class=\"comment\">//自动播放下一曲</span></div><div class=\"line\">                <span class=\"keyword\">if</span>(mediaPlayer.getDuration() - musicProcess &lt; <span class=\"number\">500</span>)&#123;</div><div class=\"line\">                    musicCurIndex = (musicCurIndex + <span class=\"number\">1</span>) % musics.size();</div><div class=\"line\">                    refreshMusicInfo(musics.get(musicCurIndex));</div><div class=\"line\">                    play();<span class=\"comment\">//播放音乐</span></div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onStartTrackingTouch</span><span class=\"params\">(SeekBar seekBar)</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">            &#125;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onStopTrackingTouch</span><span class=\"params\">(SeekBar seekBar)</span> </span>&#123;</div><div class=\"line\">                mediaPlayer.seekTo(musicProcess);<span class=\"comment\">//跳转到</span></div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);</div><div class=\"line\"></div><div class=\"line\">        handler = <span class=\"keyword\">new</span> Handler(<span class=\"keyword\">new</span> Handler.Callback()&#123;</div><div class=\"line\">        <span class=\"meta\">@Override</span></div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message message)</span> </span>&#123;</div><div class=\"line\">            <span class=\"keyword\">switch</span> (message.what)&#123;</div><div class=\"line\">                <span class=\"keyword\">case</span> UpdateCurrentTime:currentTime.setText(secondsToMinutes(mediaPlayer.getCurrentPosition()));<span class=\"keyword\">break</span>;</div><div class=\"line\">            &#125;</div><div class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</div><div class=\"line\">        &#125;</div><div class=\"line\">        &#125;);</div><div class=\"line\">        findViewById(R.id.playButton).setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</div><div class=\"line\">            <span class=\"meta\">@Override</span></div><div class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View view)</span> </span>&#123;</div><div class=\"line\">                play();</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;);</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">activityInit</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">        playButton = (ImageView) findViewById(R.id.playButton);</div><div class=\"line\">        progressBar = ( SeekBar) <span class=\"keyword\">this</span>.findViewById(R.id.progressBar);</div><div class=\"line\">        currentTime = (TextView) findViewById(R.id.curTime);</div><div class=\"line\">        duration = (TextView) findViewById(R.id.duration);</div><div class=\"line\">        title = (TextView) findViewById(R.id.musicName);</div><div class=\"line\">        cover = (CircleImageView) findViewById(R.id.musicCover);</div><div class=\"line\">        root = (LinearLayout) findViewById(R.id.root);</div><div class=\"line\">        rotateAnimation =  AnimationUtils.loadAnimation(<span class=\"keyword\">this</span>,R.anim.rotation);</div><div class=\"line\">        rotateAnimation.setFillEnabled(<span class=\"keyword\">true</span>);</div><div class=\"line\">        rotateAnimation.setFillAfter(<span class=\"keyword\">true</span>);</div><div class=\"line\">        rotateAnimation.setInterpolator(<span class=\"keyword\">new</span> LinearInterpolator());</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onDestroy</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">super</span>.onDestroy();</div><div class=\"line\">        unbindService(MainActivity.<span class=\"keyword\">this</span>);</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onServiceConnected</span><span class=\"params\">(ComponentName componentName, IBinder iBinder)</span> </span>&#123;</div><div class=\"line\">        System.out.println(<span class=\"string\">\"绑定成功\"</span>);</div><div class=\"line\">        mediaPlayer = ((MusicPlayService.MyBinder)iBinder).getMediaPlayer();</div><div class=\"line\">        progressBar.setMax(mediaPlayer.getDuration());<span class=\"comment\">//设置进度条</span></div><div class=\"line\">        duration.setText(<span class=\"string\">\"\"</span>+secondsToMinutes(mediaPlayer.getDuration()));</div><div class=\"line\">        currentTime.setText(<span class=\"string\">\"00:00\"</span>);</div><div class=\"line\">        System.out.println(mediaPlayer.getDuration());</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@Override</span></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onServiceDisconnected</span><span class=\"params\">(ComponentName componentName)</span> </span>&#123;</div><div class=\"line\"></div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">secondsToMinutes</span><span class=\"params\">(<span class=\"keyword\">int</span> seconds)</span></span>&#123;</div><div class=\"line\">        <span class=\"keyword\">int</span> minute = seconds/<span class=\"number\">60000</span>;</div><div class=\"line\">        <span class=\"keyword\">int</span> second = (seconds/<span class=\"number\">1000</span>)%<span class=\"number\">60</span>;</div><div class=\"line\">        String  m = <span class=\"string\">\"\"</span>+ minute;</div><div class=\"line\">        String  s = <span class=\"string\">\"\"</span> + second;</div><div class=\"line\">        <span class=\"keyword\">if</span> (minute&lt;<span class=\"number\">10</span>)&#123;</div><div class=\"line\">            m = <span class=\"string\">\"0\"</span> + minute;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">if</span>(second&lt;<span class=\"number\">10</span>)&#123;</div><div class=\"line\">           s = <span class=\"string\">\"0\"</span> + second;</div><div class=\"line\">        &#125;</div><div class=\"line\">        <span class=\"keyword\">return</span> m + <span class=\"string\">\":\"</span> + s;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">play</span><span class=\"params\">()</span> </span>&#123;</div><div class=\"line\">        <span class=\"keyword\">if</span>(mediaPlayer == <span class=\"keyword\">null</span> )&#123;</div><div class=\"line\">            System.out.println(<span class=\"string\">\"mediaplayer初始化失败\"</span>);</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">            <span class=\"keyword\">if</span>(mediaPlayer.isPlaying())&#123;</div><div class=\"line\">                mediaPlayer.pause();</div><div class=\"line\">                cover.clearAnimation();</div><div class=\"line\">                playButton.setImageResource(R.drawable.play);</div><div class=\"line\">            &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">                mediaPlayer.start();</div><div class=\"line\"></div><div class=\"line\">                cover.startAnimation(rotateAnimation);</div><div class=\"line\">                playButton.setImageResource(R.drawable.pause);</div><div class=\"line\">            &#125;</div><div class=\"line\">            System.out.println(mediaPlayer.isPlaying());</div><div class=\"line\">            <span class=\"keyword\">new</span> MyThread().start();</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">    <span class=\"meta\">@RequiresApi</span>(api = Build.VERSION_CODES.LOLLIPOP)</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">refreshMusicInfo</span><span class=\"params\">(Music curMusic)</span></span>&#123;</div><div class=\"line\">        title.setText(curMusic.getName());<span class=\"comment\">//设置歌曲名</span></div><div class=\"line\">        <span class=\"comment\">//        获取需要被模糊的原图bitmap</span></div><div class=\"line\">        Resources res = getResources();</div><div class=\"line\">        Bitmap scaledBitmap = BitmapFactory.decodeResource(res, curMusic.getCoverId());</div><div class=\"line\">        <span class=\"comment\">//        scaledBitmap为目标图像，25是缩放的倍数（越大模糊效果越高）</span></div><div class=\"line\">        Bitmap blurBitmap = BlurImage.toBlur(scaledBitmap, <span class=\"number\">50</span>);</div><div class=\"line\">        root.setBackground(<span class=\"keyword\">new</span> BitmapDrawable(blurBitmap));<span class=\"comment\">//设置根面板背景</span></div><div class=\"line\">        cover.setImageResource(curMusic.getCoverId());<span class=\"comment\">//设置封面</span></div><div class=\"line\">        <span class=\"keyword\">if</span>(mediaPlayer == <span class=\"keyword\">null</span>)&#123;</div><div class=\"line\">            System.out.println(<span class=\"string\">\"mediaplayer初始化失败\"</span>);</div><div class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">            <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">                AssetFileDescriptor afd = <span class=\"keyword\">this</span>.getResources().openRawResourceFd(curMusic.getResourceId());</div><div class=\"line\">                <span class=\"keyword\">if</span> (afd == <span class=\"keyword\">null</span>) &#123;</div><div class=\"line\">                    Toast.makeText(<span class=\"keyword\">this</span>,<span class=\"string\">\"音乐打开失败\"</span>,Toast.LENGTH_SHORT).show();</div><div class=\"line\">                &#125;<span class=\"keyword\">else</span>&#123;</div><div class=\"line\">                    mediaPlayer.stop();</div><div class=\"line\">                    <span class=\"keyword\">final</span> AudioAttributes aa = <span class=\"keyword\">new</span> AudioAttributes.Builder().build();</div><div class=\"line\">                    mediaPlayer.setAudioAttributes(aa);</div><div class=\"line\">                    mediaPlayer.setAudioSessionId(mediaPlayer.getAudioSessionId() + <span class=\"number\">1</span>);</div><div class=\"line\">                    mediaPlayer.setDataSource(afd.getFileDescriptor(), afd.getStartOffset(), afd.getLength());<span class=\"comment\">//设置音乐源</span></div><div class=\"line\">                    afd.close();<span class=\"comment\">//关闭文件</span></div><div class=\"line\">                    mediaPlayer.prepare();<span class=\"comment\">//音乐准备</span></div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</div><div class=\"line\">                Toast.makeText(<span class=\"keyword\">this</span>,<span class=\"string\">\"音乐播放失败\"</span>,Toast.LENGTH_SHORT).show();</div><div class=\"line\">            &#125;</div><div class=\"line\">                currentTime.setText(<span class=\"string\">\"00:00\"</span>);<span class=\"comment\">//设置开始时间</span></div><div class=\"line\">                duration.setText(secondsToMinutes(mediaPlayer.getDuration()));<span class=\"comment\">//获取音乐时长,并设置时间</span></div><div class=\"line\">                progressBar.setProgress(<span class=\"number\">0</span>);<span class=\"comment\">//将播放进度条清零</span></div><div class=\"line\">                playButton.setImageResource(R.drawable.play);<span class=\"comment\">//重新将按钮设置为播放</span></div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@RequiresApi</span>(api = Build.VERSION_CODES.LOLLIPOP)</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">previouMusic</span><span class=\"params\">(View view)</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">//可实现循环切换</span></div><div class=\"line\">        musicCurIndex = (musicCurIndex + musics.size() -<span class=\"number\">1</span>) % musics.size() ;<span class=\"comment\">//加上music.size()防止出现负数</span></div><div class=\"line\">        refreshMusicInfo(musics.get(musicCurIndex));</div><div class=\"line\">        play();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"meta\">@RequiresApi</span>(api = Build.VERSION_CODES.LOLLIPOP)</div><div class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">nextMusic</span><span class=\"params\">(View view)</span> </span>&#123;</div><div class=\"line\">        <span class=\"comment\">//可实现循环切换</span></div><div class=\"line\">        musicCurIndex = (musicCurIndex + <span class=\"number\">1</span>) % musics.size();</div><div class=\"line\">        refreshMusicInfo(musics.get(musicCurIndex));</div><div class=\"line\">        play();</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyThread</span> <span class=\"keyword\">extends</span> <span class=\"title\">Thread</span></span>&#123;</div><div class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span>  <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">            <span class=\"keyword\">while</span>(mediaPlayer.isPlaying())&#123;</div><div class=\"line\">                progressBar.setMax(mediaPlayer.getDuration());</div><div class=\"line\">                progressBar.setProgress(mediaPlayer.getCurrentPosition());</div><div class=\"line\">                handler.sendMessage(Message.obtain());</div><div class=\"line\">                <span class=\"keyword\">try</span> &#123;</div><div class=\"line\">                    Thread.sleep(<span class=\"number\">1000</span>);</div><div class=\"line\">                &#125; <span class=\"keyword\">catch</span> (InterruptedException e) &#123;</div><div class=\"line\">                    <span class=\"comment\">// TODO Auto-generated catch block</span></div><div class=\"line\">                    e.printStackTrace();</div><div class=\"line\">                &#125;</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n<h2 id=\"界面设计\"><a href=\"#界面设计\" class=\"headerlink\" title=\"界面设计\"></a>界面设计</h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div><div class=\"line\">87</div><div class=\"line\">88</div><div class=\"line\">89</div><div class=\"line\">90</div><div class=\"line\">91</div><div class=\"line\">92</div><div class=\"line\">93</div><div class=\"line\">94</div><div class=\"line\">95</div><div class=\"line\">96</div><div class=\"line\">97</div><div class=\"line\">98</div><div class=\"line\">99</div><div class=\"line\">100</div><div class=\"line\">101</div><div class=\"line\">102</div><div class=\"line\">103</div><div class=\"line\">104</div><div class=\"line\">105</div><div class=\"line\">106</div><div class=\"line\">107</div><div class=\"line\">108</div><div class=\"line\">109</div><div class=\"line\">110</div><div class=\"line\">111</div><div class=\"line\">112</div><div class=\"line\">113</div><div class=\"line\">114</div><div class=\"line\">115</div><div class=\"line\">116</div><div class=\"line\">117</div><div class=\"line\">118</div><div class=\"line\">119</div><div class=\"line\">120</div><div class=\"line\">121</div><div class=\"line\">122</div><div class=\"line\">123</div><div class=\"line\">124</div><div class=\"line\">125</div><div class=\"line\">126</div><div class=\"line\">127</div><div class=\"line\">128</div><div class=\"line\">129</div><div class=\"line\">130</div><div class=\"line\">131</div><div class=\"line\">132</div><div class=\"line\">133</div><div class=\"line\">134</div><div class=\"line\">135</div><div class=\"line\">136</div><div class=\"line\">137</div></pre></td><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">android.support.constraint.ConstraintLayout</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></span></div><div class=\"line\">    <span class=\"attr\">xmlns:app</span>=<span class=\"string\">\"http://schemas.android.com/apk/res-auto\"</span></div><div class=\"line\">    <span class=\"attr\">xmlns:tools</span>=<span class=\"string\">\"http://schemas.android.com/tools\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">    <span class=\"attr\">tools:context</span>=<span class=\"string\">\"com.lovemefan.mp3player.MainActivity\"</span>&gt;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></span></div><div class=\"line\">        <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/root\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"fill_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"fill_parent\"</span></div><div class=\"line\">        <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"vertical\"</span></div><div class=\"line\">        &gt;</div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></span></div><div class=\"line\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"fill_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"0dp\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"1\"</span></div><div class=\"line\">            <span class=\"attr\">android:alpha</span>=<span class=\"string\">\"0.4\"</span></div><div class=\"line\">            <span class=\"attr\">android:background</span>=<span class=\"string\">\"#3c3c3c\"</span></div><div class=\"line\">            <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"horizontal\"</span>&gt;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></div><div class=\"line\">                <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/musicName\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"1\"</span></div><div class=\"line\">                <span class=\"attr\">android:textAlignment</span>=<span class=\"string\">\"center\"</span></div><div class=\"line\">                <span class=\"attr\">android:textColorHighlight</span>=<span class=\"string\">\"@color/colorAccent\"</span></div><div class=\"line\">                <span class=\"attr\">android:textStyle</span>=<span class=\"string\">\"bold\"</span></div><div class=\"line\">                <span class=\"attr\">android:textColor</span>=<span class=\"string\">\"#fff\"</span></div><div class=\"line\">                <span class=\"attr\">android:textSize</span>=<span class=\"string\">\"18pt\"</span> /&gt;</div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></span></div><div class=\"line\">            <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/centerArea\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"fill_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"0dp\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"7.5\"</span></div><div class=\"line\">            <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"vertical\"</span>&gt;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">RelativeLayout</span></span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"fill_parent\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"fill_parent\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_marginBottom</span>=<span class=\"string\">\"20dp\"</span>&gt;</div><div class=\"line\"></div><div class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">ImageView</span></span></div><div class=\"line\">                    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"wrap_content\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_centerHorizontal</span>=<span class=\"string\">\"true\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_centerInParent</span>=<span class=\"string\">\"true\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_centerVertical</span>=<span class=\"string\">\"true\"</span></div><div class=\"line\">                    <span class=\"attr\">android:src</span>=<span class=\"string\">\"@drawable/record\"</span> /&gt;</div><div class=\"line\"></div><div class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">com.lovemefan.mp3player.CircleImageView</span> <span class=\"attr\">xmlns:app</span>=<span class=\"string\">\"http://schemas.android.com/apk/res-auto\"</span></span></div><div class=\"line\">                    <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/musicCover\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"225dp\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"225dp\"</span></div><div class=\"line\">                    <span class=\"attr\">android:src</span>=<span class=\"string\">\"@drawable/nineliecover\"</span></div><div class=\"line\">                    <span class=\"attr\">app:civ_border_color</span>=<span class=\"string\">\"#3c3c3c\"</span></div><div class=\"line\">                    <span class=\"attr\">app:civ_border_width</span>=<span class=\"string\">\"2dp\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_centerHorizontal</span>=<span class=\"string\">\"true\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_centerInParent</span>=<span class=\"string\">\"true\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_centerVertical</span>=<span class=\"string\">\"true\"</span></div><div class=\"line\">                    /&gt;</div><div class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">RelativeLayout</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"20dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_marginTop</span>=<span class=\"string\">\"-20dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"horizontal\"</span>&gt;</div><div class=\"line\"></div><div class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></div><div class=\"line\">                    <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/curTime\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"0pt\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">                    <span class=\"attr\">android:textAlignment</span>=<span class=\"string\">\"center\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"1.2\"</span> /&gt;</div><div class=\"line\"></div><div class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">SeekBar</span></span></div><div class=\"line\">                    <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/progressBar\"</span></div><div class=\"line\">                    <span class=\"attr\">style</span>=<span class=\"string\">\"?android:attr/progressBarStyleHorizontal\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"0dp\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"7.6\"</span> /&gt;</div><div class=\"line\"></div><div class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">TextView</span></span></div><div class=\"line\">                    <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/duration\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"0dp\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span></div><div class=\"line\">                    <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"1.2\"</span> /&gt;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">LinearLayout</span></span></div><div class=\"line\">            <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/playBar\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"fill_parent\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"0dp\"</span></div><div class=\"line\">            <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"1.5\"</span></div><div class=\"line\">            <span class=\"attr\">android:alpha</span>=<span class=\"string\">\"0.4\"</span></div><div class=\"line\">            <span class=\"attr\">android:background</span>=<span class=\"string\">\"#3c3c3c\"</span></div><div class=\"line\">            <span class=\"attr\">android:orientation</span>=<span class=\"string\">\"horizontal\"</span>&gt;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">ImageView</span></span></div><div class=\"line\">                <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/previouButton\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"60dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"60dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_marginTop</span>=<span class=\"string\">\"10dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"2\"</span></div><div class=\"line\">                <span class=\"attr\">android:onClick</span>=<span class=\"string\">\"previouMusic\"</span></div><div class=\"line\">                <span class=\"attr\">app:srcCompat</span>=<span class=\"string\">\"@drawable/previous\"</span> /&gt;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">ImageView</span></span></div><div class=\"line\">                <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/playButton\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"60dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"60dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_marginTop</span>=<span class=\"string\">\"10dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"2\"</span></div><div class=\"line\">                <span class=\"attr\">app:srcCompat</span>=<span class=\"string\">\"@drawable/play\"</span> /&gt;</div><div class=\"line\"></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">ImageView</span></span></div><div class=\"line\">                <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/nextButton\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"60dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"60dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_marginTop</span>=<span class=\"string\">\"10dp\"</span></div><div class=\"line\">                <span class=\"attr\">android:layout_weight</span>=<span class=\"string\">\"2\"</span></div><div class=\"line\">                <span class=\"attr\">android:onClick</span>=<span class=\"string\">\"nextMusic\"</span></div><div class=\"line\">                <span class=\"attr\">app:srcCompat</span>=<span class=\"string\">\"@drawable/next\"</span> /&gt;</div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">LinearLayout</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">android.support.constraint.ConstraintLayout</span>&gt;</span></div></pre></td></tr></table></figure>\n<h2 id=\"界面效果\"><a href=\"#界面效果\" class=\"headerlink\" title=\"界面效果\"></a>界面效果</h2><p><img src=\"http://oskhhyaq3.bkt.clouddn.com/blog/171116/dlca6h3hAD.png?imageslim\" alt=\"mark\"><br><img src=\"http://oskhhyaq3.bkt.clouddn.com/blog/171116/0GCA5kkBc2.png?imageslim\" alt=\"mark\"><br><img src=\"http://oskhhyaq3.bkt.clouddn.com/blog/171116/hKd52055A0.png?imageslim\" alt=\"mark\"><br><img src=\"http://oskhhyaq3.bkt.clouddn.com/blog/171116/jbaI2K4LC3.png?imageslim\" alt=\"mark\"></p>\n","prev":{"title":"Python小实践   微博爬虫","slug":"抓取女神微博动态并保存到数据库"},"next":{"title":"Android学习笔记 (二)   Intent唤醒其他Activity或APP","slug":"Android 如何唤醒第三方APP"},"link":"/2017/11/12","toc":[{"title":"MP3播放器","id":"MP3播放器","index":"1","children":[{"title":"Music.java设计","id":"Music-java设计","index":"1.1"},{"title":"后台服务类","id":"后台服务类","index":"1.2"},{"title":"MainActivity.java","id":"MainActivity-java","index":"1.3"},{"title":"界面设计","id":"界面设计","index":"1.4"},{"title":"界面效果","id":"界面效果","index":"1.5"}]}]}